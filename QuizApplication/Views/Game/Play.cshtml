@model QuizApplication.Models.ViewModels.PlayViewModel
@{
    ViewData["Title"] = "Quiz";
}
<div class="container mt-4">
    <div class="text-muted mb-3">
        Kod: <strong>@Model.AccessCode</strong> |
        Gracz: <strong>@Model.Nickname</strong>
    </div>

    <!-- Czekanie na pytanie -->
    <div id="waitingArea" class="text-center py-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-3">Ładowanie pytania...</p>
    </div>

    <!-- Obszar pytania -->
    <div id="questionArea" style="display:none;">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <span id="progress" class="text-muted"></span>
                <span class="badge bg-primary fs-5">
                    <span id="timer">--</span>s
                </span>
            </div>
            <div class="card-body">
                <h4 id="questionText" class="card-title mb-4"></h4>
                <div id="answers"></div>
                <p id="answerStatus" class="mt-3 text-center text-muted"></p>
            </div>
        </div>
    </div>

    <!-- Wyniki końcowe -->
    <div id="resultsArea" style="display:none;">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0">🎉 Koniec quizu!</h4>
            </div>
            <div class="card-body">
                <h5>Wyniki:</h5>
                <ul id="scoreboard" class="list-group"></ul>
                <div class="text-center mt-4">
                    <a href="/Game/Join" class="btn btn-primary">Dołącz do kolejnej gry</a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/7.0.5/signalr.min.js"></script>
    <script src="~/js/quiz-game.js"></script>
    <script>
        const client = new QuizGameClient("@Model.AccessCode", "@Model.Nickname", false);
        client.connectForGame();
    </script>
}
